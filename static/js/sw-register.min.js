!function(){"use strict";"serviceWorker"in navigator?document.addEventListener("DOMContentLoaded",function(){!async function(){try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("Service Worker registered successfully:",e),console.log("Service Worker scope:",e.scope),navigator.serviceWorker.controller||navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("Service Worker now controlling page, reloading..."),window.location.reload()}),e.addEventListener("updatefound",()=>{const o=e.installing;console.log("Service Worker update found"),o.addEventListener("statechange",()=>{console.log("Service Worker state changed:",o.state),"installed"===o.state&&navigator.serviceWorker.controller&&function(){console.log("New version available. Refresh to update.");const e=document.createElement("div");e.className="fixed top-0 left-0 right-0 bg-primary-500 text-white p-4 flex items-center justify-between z-50 shadow-lg",e.innerHTML='\n            <span class="font-medium">New version available. Refresh to update.</span>\n            <button id="sw-refresh-btn" class="bg-white text-primary-500 px-4 py-2 rounded font-medium hover:bg-gray-100 transition-colors">\n                Refresh\n            </button>\n        ',document.body.insertBefore(e,document.body.firstChild),document.getElementById("sw-refresh-btn").addEventListener("click",()=>{window.location.reload()})}()})}),setInterval(()=>{e.update()},3e5)}catch(e){console.error("Service Worker registration failed:",e)}}()}):console.warn("Service Worker not supported in this browser")}();