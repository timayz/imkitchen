const FeatureDetection={hasServiceWorker:()=>"serviceWorker"in navigator,hasBackgroundSync(){return!!this.hasServiceWorker()&&"sync"in ServiceWorkerRegistration.prototype},hasWakeLock:()=>"wakeLock"in navigator,hasWebPush(){return"PushManager"in window&&this.hasServiceWorker()},isInstalledPWA:()=>window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone,hasInstallPrompt:()=>"onbeforeinstallprompt"in window,getBrowserInfo(){const e=navigator.userAgent;let r="Unknown",n="Unknown";return e.includes("Firefox/")?(r="Firefox",n=e.match(/Firefox\/(\d+)/)?.[1]||"Unknown"):e.includes("Edg/")?(r="Edge",n=e.match(/Edg\/(\d+)/)?.[1]||"Unknown"):e.includes("Chrome/")?(r="Chrome",n=e.match(/Chrome\/(\d+)/)?.[1]||"Unknown"):e.includes("Safari/")&&!e.includes("Chrome")&&(r="Safari",n=e.match(/Version\/(\d+)/)?.[1]||"Unknown"),{browser:r,version:n}},meetsMinimumRequirements(){const{browser:e,version:r}=this.getBrowserInfo(),n=parseInt(r,10);if(isNaN(n))return!0;switch(e){case"Safari":return n>=14;case"Chrome":case"Edge":return n>=90;case"Firefox":return n>=88;default:return!0}},showFeatureWarning(e,r){console.warn(`Feature not supported: ${e}`,r);const n=document.getElementById("feature-warnings");if(n){const o=document.createElement("div");o.className="feature-warning bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-2",o.setAttribute("role","alert"),o.innerHTML=`\n        <p class="font-bold">${e} not supported</p>\n        <p class="text-sm">${r}</p>\n      `,n.appendChild(o),setTimeout(()=>{o.remove()},1e4)}},showBrowserUpgradeWarning(){const{browser:e,version:r}=this.getBrowserInfo(),n=document.getElementById("browser-upgrade-warning");n&&(n.className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",n.setAttribute("role","alert"),n.innerHTML=`\n      <p class="font-bold">Browser Update Required</p>\n      <p>You're using ${e} ${r}. For the best experience, please update to:</p>\n      <ul class="list-disc ml-6 mt-2">\n        <li>iOS Safari 14+ or Android Chrome 90+</li>\n        <li>Desktop: Chrome 90+, Firefox 88+, Safari 14+</li>\n      </ul>\n      <p class="mt-2">\n        <a href="/browser-support" class="underline">Learn more about browser support</a>\n      </p>\n    `,n.style.display="block")},init(){if(this.meetsMinimumRequirements()){if(this.hasServiceWorker()||this.showFeatureWarning("Service Worker","Offline functionality and background sync will not be available. Please upgrade your browser."),this.hasServiceWorker()&&!this.hasBackgroundSync()){const{browser:e}=this.getBrowserInfo();"Safari"===e&&this.showFeatureWarning("Background Sync","iOS Safari does not support background sync. Your changes will sync when you open the app.")}this.hasWakeLock()||console.info('Wake Lock API not supported. Kitchen mode "keep screen awake" feature unavailable.'),this.hasWebPush()||console.info("Web Push not supported. Push notifications will not be available."),console.info("Feature Support Summary:",{serviceWorker:this.hasServiceWorker(),backgroundSync:this.hasBackgroundSync(),wakeLock:this.hasWakeLock(),webPush:this.hasWebPush(),installedPWA:this.isInstalledPWA(),installPrompt:this.hasInstallPrompt(),browserInfo:this.getBrowserInfo()})}else this.showBrowserUpgradeWarning()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>FeatureDetection.init()):FeatureDetection.init(),"undefined"!=typeof window&&(window.FeatureDetection=FeatureDetection);