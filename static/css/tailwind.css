@import "tailwindcss";

/* Tailwind v4.1 CSS-based configuration */
@theme {
  /* Custom colors */
  --color-primary-500: #2563eb;
  --color-primary-600: #1d4ed8;
  --color-secondary-500: #f59e0b;
  --color-secondary-600: #d97706;
  --color-success-500: #10b981;
  --color-warning-500: #f59e0b;
  --color-error-500: #ef4444;

  /* Custom font family */
  --font-family-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

  /* Custom responsive breakpoints (Story 5.4) */
  /* Mobile: <768px (default, no prefix) */
  /* Tablet: 768px-1024px (md: prefix) */
  /* Desktop: >1024px (lg: prefix) */
  --breakpoint-md: 48rem;  /* 768px */
  --breakpoint-lg: 64rem;  /* 1024px */

  /* Touch target sizing (Story 5.5 - WCAG 2.1 Level AA compliance) */
  --min-height-touch-target: 44px;
  --min-width-touch-target: 44px;
  --min-height-touch-target-kitchen: 60px;
  --min-width-touch-target-kitchen: 60px;
}

/* Custom component layer */
@layer components {
  .btn-primary {
    @apply bg-primary-500 text-white px-6 py-3 rounded-lg hover:bg-primary-600 focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors;
  }

  .btn-secondary {
    @apply bg-secondary-500 text-white px-6 py-3 rounded-lg hover:bg-secondary-600 focus:ring-2 focus:ring-offset-2 focus:ring-secondary-500 transition-colors;
  }

  .recipe-card {
    @apply bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow;
  }

  /* Recipe image zoom support (Story 5.5 - enable pinch-to-zoom on images) */
  .recipe-image-modal img,
  .zoomable-image {
    touch-action: pinch-zoom;
  }

  .input-field {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-colors;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-2;
  }

  .error-message {
    @apply text-error-500 text-sm mt-1;
  }

  /* Touch target spacing (Story 5.5 - AC2: 8px minimum spacing) */
  .button-group {
    @apply flex gap-2; /* gap-2 = 8px minimum spacing between buttons */
  }

  .button-group-vertical {
    @apply flex flex-col gap-2; /* 8px vertical spacing for stacked buttons */
  }
}

/* Custom utility layer */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Touch target utilities (Story 5.5 - WCAG 2.1 Level AA) */
  .min-h-touch-target {
    min-height: var(--min-height-touch-target);
  }

  .min-w-touch-target {
    min-width: var(--min-width-touch-target);
  }

  .touch-target {
    min-height: var(--min-height-touch-target);
    min-width: var(--min-width-touch-target);
  }

  /* Checkbox and radio button sizing (Story 5.5 - 24x24px minimum with clickable label) */
  input[type="checkbox"],
  input[type="radio"] {
    width: 24px;
    height: 24px;
    cursor: pointer;
  }

  /* Label for checkbox/radio must be clickable and have adequate touch area */
  input[type="checkbox"] + label,
  input[type="radio"] + label {
    cursor: pointer;
    min-height: var(--min-height-touch-target);
    display: flex;
    align-items: center;
  }

  /* Kitchen mode: larger touch targets (60x60px) */
  body.kitchen-mode .touch-target,
  body.kitchen-mode button,
  body.kitchen-mode a[role="button"],
  body.kitchen-mode .btn-primary,
  body.kitchen-mode .btn-secondary {
    min-height: var(--min-height-touch-target-kitchen);
    min-width: var(--min-width-touch-target-kitchen);
  }

  body.kitchen-mode input[type="checkbox"],
  body.kitchen-mode input[type="radio"] {
    width: 32px;
    height: 32px;
  }

  /* Mobile-first typography: 16px minimum body text (Story 5.4 - prevents iOS zoom on input focus) */
  @media (max-width: 48rem) {
    body, p, li, td, th, input, textarea, select {
      font-size: max(16px, 1rem);
    }
  }

  /* Story 5.6: Kitchen Mode - High contrast, large text, simplified UI */
  body.kitchen-mode {
    font-size: 20px; /* AC2: 20px body text */
    color: #1a1a1a; /* AC3: Near-black text for 7:1 contrast ratio */
    background-color: #ffffff; /* AC3: White background */
    box-shadow: none; /* AC3: Remove decorative shadows */
  }

  body.kitchen-mode h1,
  body.kitchen-mode h2 {
    font-size: 28px; /* AC2: 28px headings */
    font-weight: 700;
    color: #1a1a1a;
  }

  body.kitchen-mode h3 {
    font-size: 24px;
    font-weight: 600;
    color: #1a1a1a;
  }

  /* AC4: Hide non-essential elements in kitchen mode */
  body.kitchen-mode nav,
  body.kitchen-mode footer,
  body.kitchen-mode .hide-in-kitchen-mode,
  body.kitchen-mode [data-testid="kitchen-mode-toggle"] {
    display: none !important;
  }

  /* Kitchen Mode: Increased whitespace for visual clarity (AC4) */
  body.kitchen-mode .kitchen-mode-section {
    padding: 2rem;
    margin-bottom: 2rem;
  }

  /* Kitchen Mode: Ingredient styling */
  body.kitchen-mode .kitchen-mode-ingredient {
    font-size: 1.5rem; /* 24px */
    padding: 1rem;
    margin-bottom: 0.75rem;
    border-left: 4px solid #4299e1;
    background-color: #f7fafc;
  }

  /* Kitchen Mode: Instruction styling */
  body.kitchen-mode .kitchen-mode-instruction {
    font-size: 1.5rem; /* 24px */
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    background-color: #edf2f7;
    border-radius: 0.5rem;
  }

  /* Kitchen Mode: Step number indicator */
  body.kitchen-mode .kitchen-mode-step-number {
    width: 3rem;
    height: 3rem;
    font-size: 1.75rem;
    font-weight: bold;
    background-color: #3182ce;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    flex-shrink: 0;
  }

  /* Kitchen Mode: Timer display */
  body.kitchen-mode .kitchen-mode-timer {
    font-size: 1.25rem;
    padding: 1rem 1.5rem;
    background-color: #bee3f8;
    border: 2px solid #3182ce;
    color: #1a365d;
    border-radius: 0.5rem;
    font-weight: bold;
    margin-top: 1rem;
  }

  /* Kitchen Mode: Checkbox sizing (32x32px) */
  body.kitchen-mode .kitchen-mode-checkbox {
    width: 32px;
    height: 32px;
    margin-right: 1rem;
  }

  /* Kitchen Mode: Title styling */
  body.kitchen-mode .kitchen-mode-title {
    font-size: 3rem; /* 48px for recipe title */
    font-weight: bold;
    color: #1a202c;
    margin-bottom: 1.5rem;
  }

  /* Kitchen Mode: Section titles */
  body.kitchen-mode .kitchen-mode-section-title {
    font-size: 2rem; /* 32px */
    font-weight: bold;
    color: #2d3748;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  /* Kitchen Mode: Back button */
  body.kitchen-mode .kitchen-mode-back-btn {
    font-size: 1.5rem;
    padding: 1rem 2rem;
    background-color: #3182ce;
    color: white;
    border-radius: 0.5rem;
    font-weight: bold;
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: 2rem;
  }

  /* AC3: Remove all decorative shadows and gradients in Kitchen Mode */
  body.kitchen-mode * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* AC3: Increase border weights for high contrast */
  body.kitchen-mode button,
  body.kitchen-mode .btn-primary,
  body.kitchen-mode .btn-secondary {
    border-width: 2px;
    border-color: #1a1a1a;
  }
}
