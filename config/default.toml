# imkitchen Default Configuration
#
# This file contains default configuration values for development.
# For production, create a separate config file and override with environment variables.
#
# Environment variable overrides use the pattern: IMKITCHEN__SECTION__KEY
# Example: IMKITCHEN__JWT__SECRET=your-secret
#
# Legacy environment variables are also supported:
# - DATABASE_URL
# - JWT_SECRET

[server]
# Server host address
host = "127.0.0.1"

# Server port
port = 3000

[database]
# SQLite database URL
# For production, use absolute path: sqlite:///data/imkitchen.db
url = "sqlite:imkitchen.db"

# Maximum number of database connections
max_connections = 5

[jwt]
# JWT secret key (MUST be overridden in production)
# Minimum 32 characters required
# Override with: IMKITCHEN__JWT__SECRET or JWT_SECRET environment variable
secret = "development_secret_key_change_in_production_32chars"

# JWT token expiration in days
expiration_days = 7

[email]
# SMTP Configuration for sending emails
# Local development: Use MailDev (docker-compose up -d maildev)
# Production: Use SendGrid, AWS SES, or similar
smtp_host = "localhost"
smtp_port = 1025  # MailDev SMTP port
smtp_username = ""
smtp_password = ""  # Override with: IMKITCHEN__EMAIL__SMTP_PASSWORD

# Email sender information
from_email = "noreply@imkitchen.local"  # Use real domain in production
from_name = "imkitchen"

# Base URL for email links (password reset, etc.)
base_url = "http://localhost:3000"  # Use https://imkitchen.app in production

[observability]
# OpenTelemetry collector endpoint (OTLP gRPC)
# For production, use your OTLP collector address
# Override with: IMKITCHEN__OBSERVABILITY__OTEL_ENDPOINT
otel_endpoint = "http://localhost:4319"

# Log level: trace, debug, info, warn, error
# Override with: IMKITCHEN__OBSERVABILITY__LOG_LEVEL or RUST_LOG
log_level = "info"

# Stripe payment processing configuration
# Get these values from: https://dashboard.stripe.com/test/apikeys
[stripe]
# Stripe secret key (test mode: sk_test_...)
# Override with: IMKITCHEN__STRIPE__SECRET_KEY or STRIPE_SECRET_KEY environment variable
secret_key = ""  # REQUIRED: Add your Stripe secret key

# Stripe webhook secret for signature verification (whsec_...)
# Get from: https://dashboard.stripe.com/test/webhooks
# Override with: IMKITCHEN__STRIPE__WEBHOOK_SECRET or STRIPE_WEBHOOK_SECRET
webhook_secret = ""  # REQUIRED: Add your webhook secret

# Stripe Price ID for $9.99/month premium subscription (price_...)
# Get from: https://dashboard.stripe.com/test/products
# Override with: IMKITCHEN__STRIPE__PRICE_ID or STRIPE_PRICE_ID
price_id = ""  # REQUIRED: Add your price ID

# Web Push Notifications (VAPID) - Story 4.6
# Generate keys with: npx web-push generate-vapid-keys
# Or use: openssl ecparam -genkey -name prime256v1 -out vapid_private.pem
[vapid]
# VAPID public key (base64url encoded, uncompressed P-256)
# This is included in the push subscription request from the browser
# Override with: IMKITCHEN__VAPID__PUBLIC_KEY
public_key = "BB8rIhib51reZc8Yy_MNyeWlTNpYKumwCoB5m1Sd4ggjvo_w3QtfO8XXrzxHPkoVkoVNvCdD50mbl75FYthMnN0"

# VAPID private key (base64url encoded raw key)
# Keep this secret! Never commit to version control in production
# Override with: IMKITCHEN__VAPID__PRIVATE_KEY
# Note: web-push crate expects PEM format, we'll need to convert this on load
private_key = "gQbVG-hmJgxI1hVm3RkXGEbA_B0mC-Z7vCmy4l5EUrk"

# VAPID subject (mailto: or https: URL)
# Identifies your application to push services
# Override with: IMKITCHEN__VAPID__SUBJECT
subject = "mailto:contact@imkitchen.local"

# Future configuration sections (not yet implemented):
#
# [minio]
# endpoint = "http://localhost:9000"
# access_key = "minioadmin"
# secret_key = ""  # Override with IMKITCHEN__MINIO__SECRET_KEY
