{% extends "_user.html" %}
{% block title %}Dashboard - imkitchen{% endblock %}
{% block content %}

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <!-- Welcome -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold mb-2">Welcome back, Michael!</h1>
            <p class="text-gray-600">Here's what's cooking today</p>
        </div>

        <!-- Today's Meals -->
        <div class="grid lg:grid-cols-3 gap-6 mb-8">
            {% if let Some(slot) = slot %}
            <!-- Nearest Day Card -->
            <div class="lg:col-span-2 bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <div>
                      <h2 class="text-2xl font-bold">{{ slot.day|date_year }}</h2>
                        <p class="text-gray-600">Today's Meal Plan</p>
                    </div>
                </div>

                <!-- Appetizer -->
                {% if let Some(appetizer) = slot.appetizer %}
                <div class="mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">ü•ó</span>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div>
                                    <div class="text-xs text-blue-600 font-semibold uppercase mb-1">Appetizer</div>
                                    <a href="/recipes/{{ appetizer.id }}/detail"><h3 class="font-bold text-lg">{{ appetizer.name }}</h3></a>
                                </div>
                                <div class="text-sm text-gray-600">‚è±Ô∏è {{ appetizer.total_prep_time() }} min</div>
                            </div>
                            {% if appetizer.advance_prep != "" %}
                            <div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800">
                              ‚è∞ <strong>Prep Reminder:</strong> {{ appetizer.advance_prep }}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Main Course + Accompaniment -->
                <div class="mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">üçõ</span>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div>
                                    <div class="text-xs text-orange-600 font-semibold uppercase mb-1">Main Course</div>
                                    <a href="/recipes/{{ slot.main_course.id }}/detail"><h3 class="font-bold text-lg">{{ slot.main_course.name }}</h3></a>
                                </div>
                                <div class="text-sm text-gray-600">‚è±Ô∏è {{ slot.main_course.total_prep_time() }} min</div>
                            </div>

                            {% if slot.main_course.advance_prep != "" %}
                            <div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800">
                              ‚è∞ <strong>Prep Reminder:</strong> {{ slot.main_course.advance_prep }}
                            </div>
                            {% endif %}

                            {% if let Some(accompaniment) = slot.accompaniment %}
                            <!-- Accompaniment -->
                            <div class="mb-3 p-3 bg-white rounded border border-orange-200">
                                <div class="flex items-center gap-3">
                                    <span class="text-2xl">üçö</span>
                                    <div>
                                        <div class="text-xs text-purple-600 font-semibold uppercase">Accompaniment</div>
                                        <a href="/recipes/{{ accompaniment.id }}/detail" class="font-semibold">{{ accompaniment.name }}</a>
                                        <div class="text-xs text-gray-600">‚è±Ô∏è {{ accompaniment.total_prep_time() }} min</div>
                                    </div>
                                </div>
                            </div>

                            {% if accompaniment.advance_prep != "" %}
                            <div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800">
                              ‚è∞ <strong>Prep Reminder:</strong> {{ accompaniment.advance_prep }}
                            </div>
                            {% endif %}
                            {% endif %}

                        </div>
                    </div>
                </div>

                <!-- Dessert -->
                {% if let Some(dessert) = slot.dessert %}
                <div class="p-4 bg-pink-50 border-l-4 border-pink-500 rounded-lg">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">üç∞</span>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div>
                                    <div class="text-xs text-pink-600 font-semibold uppercase mb-1">Dessert</div>
                                    <a href="/recipes/{{ dessert.id }}/detail"><h3 class="font-bold text-lg">{{ dessert.name }}</h3></a>
                                </div>
                                <div class="text-sm text-gray-600">‚è±Ô∏è {{ dessert.total_prep_time() }} min</div>
                            </div>
                            {% if dessert.advance_prep != "" %}
                            <div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800">
                              ‚è∞ <strong>Prep Reminder:</strong> {{ dessert.advance_prep }}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- Quick Actions -->
            <div class="space-y-6">
                <!-- Actions -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="font-bold text-lg mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <!-- <a href="/kitchen" class="block w-full px-4 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition text-center"> -->
                        <!--     üçõ My kitchen -->
                        <!-- </a> -->
                        <a href="/calendar/week-1/shopping-list" class="block w-full px-4 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition text-center">
                            üõí Shopping List
                        </a>
                        <a href="/recipes/import" class="block w-full px-4 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition text-center">
                            ‚ûï Import Recipes
                        </a>
                    </div>
                </div>

                <!-- Advance preps -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                  <h3 class="font-bold text-lg mb-4">Tomorrow's Prep Reminder</h3>
                  <div class="p-4 bg-pink-50 border-l-4 border-pink-500 rounded-lg">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">üç∞</span>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div>
                                    <div class="text-xs text-pink-600 font-semibold uppercase mb-1">Dessert</div>
                                    <h3 class="font-bold text-lg">Chocolate Mousse</h3>
                                </div>
                            </div>
                            <div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800">
                                ‚è∞ <strong>Prep Reminder:</strong> Prepare this dessert in the morning at 8 AM (2h chill time required)
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
            </div>
        </div>

        <!-- Upcoming Week Preview -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold mb-4">This Week at a Glance</h2>
            <div class="grid md:grid-cols-7 gap-4">
                <!-- Monday (Today) -->
                <div class="p-4 bg-green-50 border-2 border-green-500 rounded-lg">
                    <div class="font-bold text-sm mb-2">Mon 11/4</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>ü•ó Caesar Salad</div>
                        <div>üçõ Thai Curry</div>
                        <div>üç∞ Mousse</div>
                    </div>
                </div>

                <!-- Tuesday -->
                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:border-green-500 cursor-pointer">
                    <div class="font-bold text-sm mb-2">Tue 11/5</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>üçù Carbonara</div>
                        <div>ü•ñ Garlic Bread</div>
                        <div>üç® Tiramisu</div>
                    </div>
                </div>

                <!-- Wednesday -->
                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:border-green-500 cursor-pointer">
                    <div class="font-bold text-sm mb-2">Wed 11/6</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>ü•ü Gyoza</div>
                        <div>üçú Ramen</div>
                        <div>üçµ Mochi</div>
                    </div>
                </div>

                <!-- Thursday -->
                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:border-green-500 cursor-pointer">
                    <div class="font-bold text-sm mb-2">Thu 11/7</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>üåÆ Tacos</div>
                        <div>üçö Mexican Rice</div>
                        <div>üçÆ Flan</div>
                    </div>
                </div>

                <!-- Friday -->
                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:border-green-500 cursor-pointer">
                    <div class="font-bold text-sm mb-2">Fri 11/8</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>üêü Fish & Chips</div>
                        <div>ü•ó Coleslaw</div>
                        <div>üç∞ Cheesecake</div>
                    </div>
                </div>

                <!-- Saturday -->
                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:border-green-500 cursor-pointer">
                    <div class="font-bold text-sm mb-2">Sat 11/9</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>üçï Margherita Pizza</div>
                        <div>ü•ó Caprese</div>
                        <div>üç¶ Gelato</div>
                    </div>
                </div>

                <!-- Sunday -->
                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:border-green-500 cursor-pointer">
                    <div class="font-bold text-sm mb-2">Sun 11/10</div>
                    <div class="text-xs text-gray-600 space-y-1">
                        <div>üçó Roast Chicken</div>
                        <div>ü•î Roast Potatoes</div>
                        <div>üç∞ Apple Pie</div>
                    </div>
                </div>
            </div>
            <div class="mt-4 text-center">
                <a href="/calendar/week-1" class="text-green-600 font-semibold hover:text-green-700">
                    View Full Month Calendar ‚Üí
                </a>
            </div>
        </div>
    </div>
{% endblock %}
